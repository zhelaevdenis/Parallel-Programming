Оригинальное приложение из лабораторной.
Меня немного смущает задержка в sleep - если бы её не было, тогда можно было бы не прибегать к CriticalSection или Mutex.
Если нам обязательно нужна эта задержка есть вариант просто заново проверять значение баланса перед снятием, потому что мы проверяем старый баланс, а не обновлённый.
Таким образом с условного счёта 1000 можно снять 2000 или 3000, что и является ошибкой.
